{% extends "base.html" %}
{% block title %}{{ 'Crear' if modo=='crear' else 'Editar' }} usuario â€” La Cevichoza{% endblock %}
{% block content %}
<h2 class="h4 mb-3">{{ 'Crear' if modo=='crear' else 'Editar' }} usuario</h2>

<form method="post" class="card p-3">
  <div class="row g-3">
    <div class="col-md-6">
      <label class="form-label">Nombre</label>
      <input name="nombre" class="form-control" required value="{{ usuario.nombre if usuario }}">
    </div>

    <div class="col-md-6">
      <label class="form-label">Usuario</label>
      <input name="usuario" class="form-control" required value="{{ usuario.usuario if usuario }}">
    </div>

    <div class="col-md-6">
      <label class="form-label">Clave</label>
      <input name="clave" type="text" class="form-control" required value="{{ usuario.clave if usuario }}">
    </div>

    <div class="col-md-6">
      <label class="form-label">Rol</label>
      {% if roles and roles|length > 0 %}
      <select name="id_rol" class="form-select" required>
        <option value="">Selecciona un rol</option>
        {% for r in roles %}
          <option value="{{ r.id_rol }}"
                  {% if usuario and usuario.id_rol == r.id_rol %}selected{% endif %}>
            {{ r.nombre }}
          </option>
        {% endfor %}
      </select>
      {% else %}
      <div class="alert alert-warning mb-0">
        No hay roles definidos. Crea roles en la base de datos primero.
      </div>
      {% endif %}
    </div>
  </div>

  <div class="mt-3">
    <button class="btn btn-primary">Guardar</button>
    <a href="{{ url_for('usuarios_listar') }}" class="btn btn-link">Cancelar</a>
  </div>
</form>
{% endblock %}
